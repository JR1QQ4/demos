<!DOCTYPE html>
    <html>
    <head>
        <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
        <title>jquery</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css" integrity="sha384-yFRtMMDnQtDRO8rLpMIKrtPCD5jdktao2TV19YiZYWMDkUR5GQZR/NOVTdquEx1j" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
        <link href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css" rel="stylesheet" type="text/css">
        <style>
.task-list-item { list-style-type: none; } .task-list-item-checkbox { margin-left: -20px; vertical-align: middle; }
</style>
        <style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
        
        <script src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script>
    </head>
    <body>
        <h1 id="jquery">jquery</h1>
<p>版本：</p>
<ul>
<li>1.x ：兼容 IE 678，不再更新</li>
<li>2.x ：不兼容 IE 678，不再更新</li>
<li>3.x ：不兼容 IE 678，主要更新维护的版本</li>
</ul>
<h2 id="%e5%85%a5%e5%8f%a3%e5%87%bd%e6%95%b0">入口函数</h2>
<p>两种方式等价，页面DOM加载完成执行，相当于 DOMContentLoaded，不同于 load 需要把外部 js 文件、css 文件、 图像加载完毕才执行。</p>
<p>jQuery 编写多个入口函数不会覆盖，原生js编写多个入口函数后面的会覆盖前面的。</p>
<pre><code class="language-javascript"><div>    $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        $(<span class="hljs-string">'div'</span>).hide();
    });

    $(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        $(<span class="hljs-string">'div'</span>).hide();
    })
</div></code></pre>
<h2 id="jquery-%e5%af%b9%e8%b1%a1">jQuery 对象</h2>
<p><code>$</code>是<code>jQuery</code>的别名，两者可以替代；<code>$</code>是jQuery种的顶级对象。<code>$()</code>可以传入一个入口函数、DOM对象、代码片段（创建元素）、传入选择器。</p>
<ul>
<li>DOM 对象变成 jQuery 对象：<code>$(DOM)</code>，jQuery 对象才能使用 jQuery 的方法。</li>
<li>jQuery 对象变成 DOM 对象：<code>$(DOM)[index]</code> 或者 <code>$(DOM).get(index)</code>，此时就能使用原生js的方法。</li>
</ul>
<p>多库共存，解决冲突：</p>
<ul>
<li>把 <code>$</code> 改为 <code>jQuery</code></li>
<li>jQuery 变量规定新名称：<code>var xx = $.noConflict();</code></li>
</ul>
<p><code>$</code>的静态方法：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">.</mi><mi>i</mi><mi>s</mi><mi>W</mi><mi>i</mi><mi>n</mi><mi>d</mi><mi>o</mi><mi>w</mi><mo stretchy="false">(</mo><mi>o</mi><mi>b</mi><mi>j</mi><mo stretchy="false">)</mo><mi mathvariant="normal">、</mi></mrow><annotation encoding="application/x-tex">.isWindow(obj) 、</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">.</span><span class="mord mathdefault">i</span><span class="mord mathdefault">s</span><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mord mathdefault">d</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord mathdefault">o</span><span class="mord mathdefault">b</span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span><span class="mord cjk_fallback">、</span></span></span></span>.isarray(obj) 、<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">.</mi><mi>t</mi><mi>r</mi><mi>i</mi><mi>m</mi><mo stretchy="false">(</mo><mi>s</mi><mi>t</mi><mi>r</mi><mo stretchy="false">)</mo><mi mathvariant="normal">、</mi></mrow><annotation encoding="application/x-tex">.trim(str) 、</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">.</span><span class="mord mathdefault">t</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">i</span><span class="mord mathdefault">m</span><span class="mopen">(</span><span class="mord mathdefault">s</span><span class="mord mathdefault">t</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mclose">)</span><span class="mord cjk_fallback">、</span></span></span></span>.isFunction(obj)...</p>
<h2 id="%e9%80%89%e6%8b%a9%e5%99%a8">选择器</h2>
<p>基础选择器：<code>$(&quot;#id&quot;)</code>、<code>$(&quot;.class&quot;)</code>、<code>$(&quot;*&quot;)</code>、<code>$(&quot;div&quot;)</code>、<code>$(&quot;div,p,li&quot;)</code>、<code>$(&quot;li.active&quot;)</code></p>
<p>层级选择器：<code>$(&quot;ul&gt;li&quot;)</code>、<code>$(&quot;ul li&quot;)</code></p>
<p>筛选选择器：<code>$(&quot;li:first&quot;)</code>、<code>$(&quot;li:last&quot;)</code>、<code>$(&quot;li:eq(2)&quot;)</code>、<code>$(&quot;li:odd&quot;)</code>、<code>$(&quot;li:even&quot;)</code></p>
<p>表单；<code>$(&quot;input[type=checkbox]:checked&quot;)</code></p>
<p>伪类选择器：</p>
<ul>
<li><code>:empty</code>：找到既没有文本内容也没有子元素的指定元素</li>
<li><code>:parent</code>：找到有文本内容或有子元素的</li>
<li><code>:contains(&quot;内容&quot;)</code>：找到包含指定文本内容的</li>
<li><code>:has(selector)</code>：找到包含指定子元素的</li>
</ul>
<p>筛选方法：</p>
<ul>
<li><code>$(&quot;li&quot;).parent()</code>、<code>$(this).parents(&quot;.wrapper&quot;)</code></li>
<li><code>$(&quot;ul&quot;).children(&quot;li&quot;)</code></li>
<li><code>$(&quot;ul&quot;).find(&quot;li&quot;)</code> ：相当于后代选择器</li>
<li><code>$(&quot;.first&quot;).siblings(&quot;li&quot;)</code> ：查找兄弟节点，不包括自身</li>
<li><code>$(&quot;.first&quot;).nextAll()</code> ：查找当前元素之后所有的同辈元素</li>
<li><code>$(&quot;.last&quot;).prevAll()</code> ：查找当前元素之前所有的同辈元素</li>
<li><code>$(&quot;div&quot;).hasClass(&quot;active&quot;)</code> ：见着当前蒜素是否有某个特定的类，有返回 true</li>
<li><code>$(&quot;li&quot;).eq(2)</code> ：相当于<code>$(&quot;li:eq(2)&quot;)</code>，index 从 0 开始</li>
</ul>
<p>获取索引：<code>var index = $(this).index()</code></p>
<h2 id="%e6%a0%b7%e5%bc%8f%e6%93%8d%e4%bd%9c">样式操作</h2>
<p>隐式迭代：<code>$(&quot;div&quot;).css(&quot;backgroundColor&quot;, &quot;pink&quot;)</code>，jquery 会把匹配到的所有元素内部进行遍历循环，给每一个元素添加 css 这个方法。</p>
<p><code>$(this).css()</code>方法：</p>
<ul>
<li><code>$(this).css(&quot;color&quot;)</code> ：返回 color 的值</li>
<li><code>$(this).css(&quot;color&quot;,&quot;pink&quot;)</code> ：设置 color 的值</li>
<li><code>$(this).css({ width:400,height:200px })</code> ：对象的方式修改 css</li>
</ul>
<p>类样式：与原生 className 不同，不会改变以前类名，只是针对指定类进行操作</p>
<ul>
<li><code>$(this).addClass(&quot;current&quot;)</code> ：添加类</li>
<li><code>$(this).removeClass(&quot;current&quot;)</code> ：删除类</li>
<li><code>$(this).toggleClass(&quot;current&quot;)</code> ：切换类</li>
</ul>
<h2 id="%e6%95%88%e6%9e%9c">效果</h2>
<p>显示隐藏：<code>show([speed, [easing], [fn]])</code>、<code>hide()</code>、<code>toggle()</code></p>
<p>滑动：<code>sildeDown()</code>、<code>sildeUp()</code>、<code>slideToggle()</code></p>
<p>淡入淡出：<code>fadeIn()</code>、<code>fadeOut()</code>、<code>fadeToggle()</code>、<code>fadeTo([[speed], opacity, [eading], [fn]])</code></p>
<p>动画：<code>animate(params, [speed], [easing], [fn])</code></p>
<ul>
<li>效果累加：<code>animate({ width: &quot;+=100&quot;}, 1000, fn)</code></li>
<li>延时：<code>delay(1000)</code></li>
<li>停止：
<ul>
<li><code>stop()</code>立即停止当前的，执行后面的；</li>
<li><code>stop(true)</code>/<code>stop(true,false)</code>立即停止当前的和后续的；</li>
<li><code>stop(false,true)</code>立即完成当前的，执行后续的</li>
<li><code>stop(true, true)</code>立即完成当前的，停止后续所有的</li>
<li>第一个参数是否执行后续动画，第二个参数是否立即完成当前动画</li>
</ul>
</li>
</ul>
<p>事件切换：<code>hover([over,]out)</code>，over 对应 mouseenter，out 对应 mouseleave。动画或效果队列：动画或者效果一旦触发就会执行，如果多次触发就造成多个动画或者效果排队执行。</p>
<pre><code class="language-javascript"><div><span class="hljs-comment">// 只写一个函数，表示两个回调函数执行一个方法</span>
$(<span class="hljs-string">"ul&gt;li"</span>).hover(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-comment">// stop 必须写在动画的前面，谁做动画就写在那里，相当于停止结束上一次的动画</span>
    $(<span class="hljs-keyword">this</span>).children(<span class="hljs-string">"ul"</span>).stop().sildeToggle();
});

$(<span class="hljs-string">".wrap li"</span>).mouseenter(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    $(<span class="hljs-keyword">this</span>).stop().animate({
        <span class="hljs-attr">width</span>: <span class="hljs-number">224</span>
    }).find(<span class="hljs-string">".small"</span>).stop().fadeOut().siblings(<span class="hljs-string">".big"</span>).stop().fadeIn();
    $(<span class="hljs-keyword">this</span>).siblings(<span class="hljs-string">"li"</span>).stop().animate({
        <span class="hljs-attr">width</span>: <span class="hljs-number">69</span>
    }).find(<span class="hljs-string">".small"</span>).stop().fadeIn().siblings(<span class="hljs-string">".big"</span>).stop().fadeOut();
})
</div></code></pre>
<h2 id="%e5%b1%9e%e6%80%a7">属性</h2>
<p>设置或获取元素固有属性值：<code>$(this).prop(&quot;title&quot;)</code>、<code>$(this).prop(&quot;title&quot;, &quot;this is title&quot;)</code></p>
<p>设置或获取自定义属性：<code>$(this).attr(&quot;data-index&quot;)</code>、<code>$(this).attr(&quot;data-index&quot;,&quot;1&quot;)</code></p>
<p>数据缓存<code>data()</code>：可以在指定的元素上存取数据，并不会修改DOM元素结构，一旦页面刷新，之前存放的数据都将被移除，设置的属性在DOM上看不见。</p>
<p>data 与 attr 区别：</p>
<ul>
<li>data 获取 h5 自定义属性不需要写 data-，如获取 data-index, 只需要写<code>$(this).data(&quot;index&quot;)</code></li>
<li>data 获取到的如果是数字就是 Number 类型，attr 获取的是 String 类型</li>
</ul>
<pre><code class="language-javascript"><div><span class="hljs-comment">// 原生获取设置 data 属性</span>
&lt;div id=<span class="hljs-string">"nav"</span> data-index=<span class="hljs-string">"1"</span>&gt;首页&lt;<span class="hljs-regexp">/div&gt;
var nav = document.getElementById("nav");
console.log(nav.dataset.index); /</span><span class="hljs-regexp">/ 1
nav.dataset.time = Date.now();
console.log(nav.dataset.time); /</span><span class="hljs-regexp">/ 1568196434576
</span></div></code></pre>
<p>操作属性节点：</p>
<ul>
<li><code>attr()</code>，如果是获取，无论多少个元素，都只返回第一个元素指定的属性节点的值</li>
<li><code>removeAttr()</code>，同是删除多个属性节点，用空格隔开<code>removeAttr(attr1 attr2...)</code></li>
</ul>
<p>操作属性，元素的属性：</p>
<ul>
<li><code>prop()</code>，不仅可以操作属性，还能操作属性节点；具有 true 和 false 两个属性的属性节点使用 prop</li>
<li><code>removeProp()</code></li>
</ul>
<h2 id="%e5%86%85%e5%ae%b9%e6%96%87%e6%9c%ac%e5%80%bc">内容文本值</h2>
<p>普通元素内容：</p>
<ul>
<li>标签 html: <code>$(&quot;div&quot;).html()</code>、<code>$(&quot;div&quot;).html(&quot;&lt;h2&gt;设置文本值&lt;/h2&gt;&quot;)</code></li>
<li>文本 text: <code>$(&quot;div&quot;).text()</code>、<code>$(&quot;div&quot;).html(&quot;text&quot;)</code></li>
<li>表单 val: <code>$(&quot;input&quot;).val()</code>、<code>$(&quot;input&quot;).val(&quot;text&quot;)</code>，返回值0</li>
</ul>
<h2 id="%e5%85%83%e7%b4%a0%e6%93%8d%e4%bd%9c">元素操作</h2>
<p>遍历元素：</p>
<ul>
<li>each： <code>$(div).each(function(index, domEle) {})</code>，第二个参数是 DOM 对象，不是 jQuery 对象</li>
<li><code>$.each</code>：<code>$.each($(div), function(index, domEle) {})</code>，主要用于遍历数据处理数据
<ul>
<li>不仅可以遍历数组，还能遍历伪数组</li>
<li><code>$.map()</code>返回处理后的新数组</li>
</ul>
</li>
</ul>
<pre><code class="language-javascript"><div><span class="hljs-comment">// $.each 方便遍历数据，比如对象、数组</span>
<span class="hljs-keyword">var</span> arr = [<span class="hljs-string">"red"</span>, <span class="hljs-string">"green"</span>, <span class="hljs-string">"blue"</span>];
$.each(arr, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">i, ele</span>)</span>{
    <span class="hljs-built_in">console</span>.log(i + <span class="hljs-string">"---"</span> + ele); <span class="hljs-comment">// 0---red 1---green 2---blue</span>
});<span class="hljs-comment">// ["red", "green", "blue"]</span>

<span class="hljs-comment">// 原生 foreach</span>
arr.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">v, i, arr</span>)</span>{
    <span class="hljs-built_in">console</span>.log(v + <span class="hljs-string">"---"</span> + i);
    <span class="hljs-built_in">console</span>.log(arr)
}); <span class="hljs-comment">// undefined</span>

<span class="hljs-keyword">var</span> obj = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>]
<span class="hljs-comment">// $.map() 方法</span>
<span class="hljs-keyword">var</span> result = $.map(obj, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">v, i</span>)</span>{
    <span class="hljs-built_in">console</span>.log(v, i); <span class="hljs-comment">// 1 0, 2 1, 3 2, 4 3</span>
    <span class="hljs-keyword">return</span> v &gt; <span class="hljs-number">2</span>;
}); <span class="hljs-comment">// 默认返回[], [false, false, true, true]</span>

<span class="hljs-comment">// 原生map</span>
<span class="hljs-keyword">var</span> result2 = obj.map(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">v, i, arr</span>)</span>{
    <span class="hljs-built_in">console</span>.log(v, i); <span class="hljs-comment">// 1 0, 2 1, 3 2, 4 3</span>
    <span class="hljs-keyword">return</span> v &gt; <span class="hljs-number">2</span>;
}); <span class="hljs-comment">// [false, false, true, true]</span>
</div></code></pre>
<p>创建元素：<code>var li = $(&quot;&lt;li&gt;创建的li&lt;/li&gt;&quot;);</code></p>
<p>添加元素：</p>
<ul>
<li>内部添加，父子关系：<code>$(&quot;ul&quot;).append(li);</code>、<code>$(&quot;ul&quot;).prepend(li);</code>、<code>$(&quot;li&quot;).appendTo(&quot;ul&quot;)</code></li>
<li>外部添加，兄弟关系：<code>$(&quot;div&quot;).after(div)</code>、<code>$(&quot;div&quot;).before(div)</code></li>
</ul>
<p>删除元素：</p>
<ul>
<li><code>$(this).remove()</code>，删除匹配的元素</li>
<li><code>$(&quot;ul&quot;).empty()</code>，删除 ul 里的 li，即删除子节点</li>
<li><code>$(&quot;ul&quot;).html(&quot;&quot;)</code>，清除内部元素</li>
<li><code>$(&quot;p&quot;).detach(&quot;.hello&quot;)</code>，与remove()不同的是，所有绑定的事件、附加的数据等都会保留下来</li>
</ul>
<p>替换元素：</p>
<ul>
<li><code>$('.third').replaceWith($('.first'))</code>，用 .first 替换 .third</li>
<li><code>$(&quot;&lt;b&gt;Paragraph. &lt;/b&gt;&quot;).replaceAll(&quot;p&quot;)</code>，用匹配的元素替换掉所有 selector匹配到的元素</li>
</ul>
<p>复制元素：</p>
<ul>
<li><code>$(&quot;b&quot;).clone().prependTo(&quot;p&quot;)</code>，浅复制不会复制事件，深复制会复制元素的事件</li>
</ul>
<h2 id="%e5%b0%ba%e5%af%b8%e4%bd%8d%e7%bd%ae%e6%93%8d%e4%bd%9c">尺寸、位置操作</h2>
<p>尺寸：</p>
<ul>
<li><code>width()/height()</code>：只算 width/height</li>
<li><code>innerWidth()/innerHeight()</code>：包含 padding</li>
<li><code>outerWidth()/outerHeight()</code>：包含 padding、border</li>
<li><code>outerWidth(true)/outerHeight(true)</code>：包含 padding、border、margin</li>
</ul>
<p>位置：</p>
<ul>
<li><code>offset()</code>：返回一个对象，距离文档的上左位置<code>{left:x,top:x}</code>，也可以设置</li>
<li><code>position()</code>：获取距离带定位的父级元素的位置，不能设置</li>
<li><code>scrollTop()/scrollLeft()</code>：设置或获取元素被卷去的头部和左侧</li>
</ul>
<pre><code class="language-javascript"><div><span class="hljs-keyword">var</span> flag = <span class="hljs-literal">true</span>;
<span class="hljs-comment">// 返回顶部</span>
$(<span class="hljs-string">".top"</span>).click(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    flag = <span class="hljs-literal">false</span>;
    <span class="hljs-comment">// 使用 scrollTop 但是没有过渡动画</span>
    <span class="hljs-comment">// $(document).scrollTop(0);</span>
    <span class="hljs-comment">// animate 是元素做动画不是 document</span>
    $(<span class="hljs-string">"body,html"</span>).stop().animate({
        <span class="hljs-attr">scrollTop</span>: <span class="hljs-number">0</span>
    },<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
        flag = <span class="hljs-literal">true</span>;
    });
})
<span class="hljs-comment">// 每次点击操作都会触发 $(window).scroll 方法，会有 bug，此时需要设置标志位，节流阀</span>
<span class="hljs-comment">// 如果用户点击了，就不触发 scroll 方法，当动画执行完毕之后再恢复 flag</span>
</div></code></pre>
<h2 id="%e4%ba%8b%e4%bb%b6">事件</h2>
<p>事件注册：</p>
<ul>
<li>单个事件注册：<code>element.事件()</code></li>
<li>绑定一个或多个事件：<code>element.on(events, [selector], fn)</code>
<ul>
<li><code>on</code>方法还能实现事件委托</li>
<li><code>on</code>方法可以为动态创建的元素添加事件</li>
</ul>
</li>
</ul>
<pre><code class="language-javascript"><div>$(<span class="hljs-string">"div"</span>).on({
    <span class="hljs-attr">mouseenter</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
        $(<span class="hljs-keyword">this</span>).css(<span class="hljs-string">"background"</span>, <span class="hljs-string">"skyblue"</span>);
    },
    <span class="hljs-attr">mouseleave</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
        $(<span class="hljs-keyword">this</span>).css(<span class="hljs-string">"background"</span>, <span class="hljs-string">"greenyellow"</span>);
    }
})

<span class="hljs-comment">// 如果多个事件的事件处理函数一样，则可以简写</span>
$(<span class="hljs-string">"div"</span>).on(<span class="hljs-string">"mouseenter mouseleave"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    $(<span class="hljs-keyword">this</span>).children(<span class="hljs-string">".item"</span>).stop().fadeToggle();
    $(<span class="hljs-keyword">this</span>).toggleClass(<span class="hljs-string">"current"</span>);
})

<span class="hljs-comment">// 事件委托</span>
$(<span class="hljs-string">"ul"</span>).on(<span class="hljs-string">"click"</span>, <span class="hljs-string">"li"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-comment">// 此时的 this 不是 ul，而是 li</span>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>);
});
</div></code></pre>
<p>解绑事件：<code>$(this).off()</code>、<code>$(this).off(&quot;click&quot;)</code>、<code>$(&quot;ul&quot;).off(&quot;click&quot;, &quot;li&quot;)</code>，可以解除所有事件、单个事件、事件委托</p>
<p>如果有的事件指向触发一次，可以使用 <code>one()</code> 来绑定事件：<code>$(&quot;p&quot;).one(&quot;click&quot;, function(){ })</code></p>
<p>自定触发事件<code>trigger</code>：</p>
<ul>
<li><code>$(&quot;div&quot;).click()</code>，不是事件注册，是调用已经注册的事件</li>
<li><code>$(&quot;div&quot;).trigger(&quot;click&quot;)</code>，不会触发默认行为</li>
<li><code>$(&quot;div&quot;).triggerHandler(&quot;click&quot;)</code>，不会触发元素的默认行为，事件冒泡</li>
</ul>
<pre><code class="language-html"><div><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"father"</span>&gt;</span>father
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"son"</span>&gt;</span>son <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://www.baidu.com"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>跳转<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-comment">&lt;!-- 如果想要触发 a 标签的默认行为，可以在 a 标签里添加 span，然后触发 span 的点击事件  --&gt;</span>
</div></code></pre>
<p>自定义事件：可以使用 <code>trigger</code> 创建，注册时必须用 <code>on</code></p>
<ul>
<li><code>$(this).on(&quot;myClick&quot;, fn)</code>，<code>$(this).trigger(&quot;myClick&quot;)</code></li>
</ul>
<p>事件命名空间：<code>$(this).on(&quot;click.zs&quot;, fn)</code>，<code>$(this).on(&quot;click.ls&quot;, fn)</code>；只触发想触发的，<code>$(this).trigger(&quot;click.zs&quot;)</code></p>
<ul>
<li>存在嵌套的时候，使用<code>trigger</code>触发子元素事件，父元素也会触发带相同命名空间的事件，不同命名空间的不触发</li>
</ul>
<p>事件对象：<code>$(&quot;div&quot;).on(events, [selector], function(event){})</code>，即 event</p>
<ul>
<li>阻止默认行为： event.preventDefault() 或者 return false</li>
<li>阻止冒泡：event.stopPropagation()</li>
</ul>
<p>其它事件：</p>
<ul>
<li><code>mouseover</code>/<code>mouseout</code>：子元素被移入移除也会触发父元素的事件，存在嵌套关系</li>
<li><code>mouseenter</code>/<code>mouseleave</code>：移入子元素不会触发父元素的事件</li>
<li><code>hover([over,]out)</code>：移入移出事件切换</li>
<li>实时监听获取输入框值：<code>$(&quot;body&quot;).on(&quot;propertychange input&quot;, &quot;textarea&quot;, fn)</code>，<code>$(&quot;#input&quot;).bind(&quot;input propertychange&quot;, fn)</code></li>
</ul>
<h2 id="%e5%af%b9%e8%b1%a1%e6%8b%b7%e8%b4%9d">对象拷贝</h2>
<p>如果想要把某个对象拷贝（合并）给另一个对象使用，<code>$.extend([deep], target, object1, [objectN])</code></p>
<ul>
<li>deep：如果为 true 表示深拷贝，默认 false 表示浅拷贝（只拷贝地址）</li>
<li>target：要拷贝的目标对象</li>
<li>object1：待拷贝的第一个对象</li>
</ul>
<pre><code class="language-javascript"><div><span class="hljs-comment">// 会覆盖合并新的对象</span>
<span class="hljs-keyword">var</span> targetobj = {
    <span class="hljs-attr">id</span>: <span class="hljs-number">0</span>
};
<span class="hljs-keyword">var</span> obj = {
    <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">msg</span>: <span class="hljs-string">"hello"</span>
}
$.extend(targetobj, obj);
<span class="hljs-built_in">console</span>.log(targetobj); <span class="hljs-comment">// {id: 1, msg: "hello"}</span>

<span class="hljs-comment">// 深拷贝，如果是复杂数据类型，是做交集运算</span>
<span class="hljs-keyword">var</span> targetobj = {
    <span class="hljs-attr">id</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">msg</span>: {
        <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>
    }
};
<span class="hljs-keyword">var</span> obj = {
    <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">msg</span>: {
        <span class="hljs-attr">name</span>: <span class="hljs-string">"zs"</span>
    }
}
$.extend(<span class="hljs-literal">true</span>, targetobj, obj);
<span class="hljs-built_in">console</span>.log(targetobj); <span class="hljs-comment">// {id: 1, msg: {age:18, name: "zs"}}</span>
</div></code></pre>
<h2 id="%e5%8e%9f%e7%90%86">原理</h2>
<ul>
<li>自调用函数。</li>
<li>undefined 作用，方便代码压缩，IE9下 undefined 可以别修改。</li>
</ul>
<pre><code class="language-javascript"><div>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">window, undefined</span>)</span>{
    <span class="hljs-keyword">var</span> jQuery = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> jQuery.fn.init();
    };
    jQuery.fn = jQuery.prototype = {
        <span class="hljs-attr">constructor</span>: jQuery,
        <span class="hljs-attr">init</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{}
    };
    <span class="hljs-comment">// 封装工具方法</span>
    jQuery.extend = jQuery.prototype.extend = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">obj</span>) </span>{
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> obj) {
            <span class="hljs-keyword">this</span>[key] = obj[key];
        }
    };
    jQuery.prototype.init.prototype = jQuery.prototype;
    <span class="hljs-built_in">window</span>.jQuery = <span class="hljs-built_in">window</span>.$ = jQuery;
})(<span class="hljs-built_in">window</span>)
</div></code></pre>
<h2 id="ajax">ajax</h2>
<p>自定义 ajax 方法：</p>
<ul>
<li>处理 xml 文件，使用 xhr.responseXML</li>
<li>处理 json 文件，使用 xhr.responseText</li>
</ul>
<pre><code class="language-javascript"><div>    myjQuery.extend({
        <span class="hljs-comment">// 对象转字符串，作用一，IE中获得实时数据</span>
        objToString: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">obj</span>) </span>{
            <span class="hljs-keyword">var</span> res = [];
            obj = obj || {};
            obj.t = <span class="hljs-built_in">Date</span>.now();
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> k <span class="hljs-keyword">in</span> obj) {
                <span class="hljs-comment">// url 地址编码</span>
                res.push(<span class="hljs-built_in">encodeURIComponent</span>(k) + <span class="hljs-string">"="</span> + <span class="hljs-built_in">encodeURIComponent</span>(obj[k]));
            }
            <span class="hljs-keyword">return</span> res.join(<span class="hljs-string">"&amp;"</span>);
        },
        <span class="hljs-attr">ajax</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">obj</span>) </span>{
            <span class="hljs-keyword">var</span> type = <span class="hljs-built_in">String</span>(obj.type).toLocaleUpperCase() || <span class="hljs-string">"GET"</span>;
            <span class="hljs-keyword">var</span> url = obj.url || <span class="hljs-string">""</span>;
            <span class="hljs-keyword">var</span> data = myjQuery.objToString(obj.data);
            <span class="hljs-keyword">var</span> success = obj.success;
            <span class="hljs-keyword">var</span> error = obj.error;
            <span class="hljs-keyword">var</span> timeout = obj.timeout || <span class="hljs-number">5000</span>;
            <span class="hljs-comment">// 1.创建 xhr</span>
            <span class="hljs-keyword">var</span> xhr;
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.XMLHttpRequest) {
                xhr = <span class="hljs-keyword">new</span> XMLHttpRequest();
            } <span class="hljs-keyword">else</span> {
                xhr = <span class="hljs-keyword">new</span> ActiveXObject(<span class="hljs-string">"Microsoft.XMLHTTP"</span>);
            }
            <span class="hljs-comment">// 2.判断请求类型 -&gt; 3.发送请求,第单个参数表示异步</span>
            <span class="hljs-keyword">if</span> (type === <span class="hljs-string">"GET"</span>) {
                xhr.open(type, url + <span class="hljs-string">"?"</span> + data, <span class="hljs-literal">true</span>);
                xhr.send();
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (type === <span class="hljs-string">"POST"</span>) {
                xhr.open(tyep, url, <span class="hljs-literal">true</span>);
                xhr.setRequestHeader(<span class="hljs-string">"Content-type"</span>, <span class="hljs-string">"application/x-www-form-urlencoded"</span>);
                xhr.send(data);
            }
            <span class="hljs-comment">// 4.监听状态的变化</span>
            <span class="hljs-keyword">try</span> {
                xhr.onreadstatechange = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                    clearTimeout(xhr.timer);
                    <span class="hljs-keyword">if</span> (xhr.readyState === <span class="hljs-number">4</span>) {
                        <span class="hljs-keyword">if</span> (xhr.status &gt;= <span class="hljs-number">200</span> &amp;&amp; xhr.status &lt; <span class="hljs-number">300</span> || xhr.status === <span class="hljs-number">304</span>) {
                            success(xhr);
                        } <span class="hljs-keyword">else</span> {
                            error(xhr);
                        }
                    }
                }
                <span class="hljs-comment">// 定时方法，防止请求超时</span>
                xhr.timer = setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"请求超时，请稍后重试"</span>);
                    xhr.abort();
                    clearTimeout(xhr.timer);
                })
            } <span class="hljs-keyword">catch</span> (error) {
                <span class="hljs-keyword">throw</span> error;
            }
        }
    })

    <span class="hljs-comment">// 原生解决跨域</span>
    &lt;script src=<span class="hljs-string">"https://www.tianqiapi.com/api/?version=v1&amp;appid=45448449&amp;appsecret=C9aBxvei&amp;city=成都&amp;callback=mycallback"</span>&gt;<span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
    &lt;script&gt;
        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mycallback</span>(<span class="hljs-params">json</span>) </span>{
            <span class="hljs-built_in">console</span>.log(json);
        }
    &lt;<span class="hljs-regexp">/script&gt;
</span></div></code></pre>
<p>jQuery 自带的 ajax 方法，跨域：</p>
<pre><code class="language-javascript"><div>    $.ajax({
        <span class="hljs-attr">type</span>: <span class="hljs-string">"GET"</span>,
        <span class="hljs-attr">url</span>: <span class="hljs-string">"https://www.tianqiapi.com/api/"</span>,
        <span class="hljs-attr">data</span>: <span class="hljs-string">"?version=v1&amp;appid=45448449&amp;appsecret=C9aBxvei&amp;city=成都"</span>,
        <span class="hljs-attr">dataType</span>: <span class="hljs-string">"jsonp"</span>,
        <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">response</span>) </span>{
            <span class="hljs-built_in">console</span>.log(response);
        }
    });

    <span class="hljs-comment">// 带有回调函数的</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mycallback</span>(<span class="hljs-params">res</span>) </span>{
        <span class="hljs-built_in">console</span>.log(res);
    }
    <span class="hljs-comment">// （1）直接写在 data 上</span>
    $.ajax({
        <span class="hljs-attr">type</span>: <span class="hljs-string">"GET"</span>,
        <span class="hljs-attr">url</span>: <span class="hljs-string">"https://www.tianqiapi.com/api/"</span>,
        <span class="hljs-attr">data</span>: <span class="hljs-string">"?version=v1&amp;appid=45448449&amp;appsecret=C9aBxvei&amp;city=成都&amp;callback=mycallback"</span>,
        <span class="hljs-attr">dataType</span>: <span class="hljs-string">"jsonp"</span>,
        <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">response</span>) </span>{}
    });
    <span class="hljs-comment">// （2）单独写在属性上</span>
    $.ajax({
        <span class="hljs-attr">type</span>: <span class="hljs-string">"GET"</span>,
        <span class="hljs-attr">url</span>: <span class="hljs-string">"https://www.tianqiapi.com/api/"</span>,
        <span class="hljs-attr">data</span>: <span class="hljs-string">"?version=v1&amp;appid=45448449&amp;appsecret=C9aBxvei&amp;city=成都"</span>,
        <span class="hljs-attr">dataType</span>: <span class="hljs-string">"jsonp"</span>,
        <span class="hljs-attr">jsonpCallback</span>: <span class="hljs-string">"mycallback"</span>,
        <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">response</span>) </span>{
            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"object"</span>);
        }
    });
</div></code></pre>
<h2 id="%e6%8f%92%e4%bb%b6%e5%86%99%e6%b3%95">插件写法</h2>
<pre><code class="language-javascript"><div><span class="hljs-comment">// 用于设置获取 cookie</span>
;(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">$$, window</span>) </span>{
    $$.extend({
        <span class="hljs-comment">// document.cookie="username=John Doe; expires=Thu, 18 Dec 2043 12:00:00 GMT; path=/";</span>
        addCookie: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key, value, deadline, path, domain</span>) </span>{
            key = key || <span class="hljs-string">""</span>;
            value = value || <span class="hljs-string">""</span>;

            <span class="hljs-keyword">var</span> index = <span class="hljs-built_in">window</span>.location.pathname.lastIndexOf(<span class="hljs-string">"/"</span>);
            <span class="hljs-keyword">var</span> currentPath = <span class="hljs-built_in">window</span>.location.pathname.slice(<span class="hljs-number">0</span>, index);
            path = path || currentPath;
            domain = domain || <span class="hljs-built_in">document</span>.domain;
            <span class="hljs-keyword">if</span> (!deadline) {
                <span class="hljs-built_in">document</span>.cookie = key + <span class="hljs-string">"="</span> + value + <span class="hljs-string">"; path="</span> + path + <span class="hljs-string">"; domain="</span> + domain;
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">var</span> date = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();
                date.setDate(date.getDate() + deadline);
                <span class="hljs-built_in">document</span>.cookie = key + <span class="hljs-string">"="</span> + value + <span class="hljs-string">"; expires="</span> + date.toGMTString() + <span class="hljs-string">"; path="</span> + path + <span class="hljs-string">"; domain="</span> + domain;
            }
        },

        <span class="hljs-attr">getCookie</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{
            <span class="hljs-keyword">var</span> cookies = <span class="hljs-built_in">document</span>.cookie.split(<span class="hljs-string">";"</span>);
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, len = cookies.length; i &lt; len; i++) {
                <span class="hljs-keyword">var</span> temp = cookies[i].split(<span class="hljs-string">"="</span>);
                <span class="hljs-keyword">if</span> (temp[<span class="hljs-number">0</span>].trim() === key) {
                    <span class="hljs-keyword">return</span> temp[<span class="hljs-number">1</span>];
                }
            }
            <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
        },

        <span class="hljs-attr">removeCookie</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key, path</span>) </span>{
            <span class="hljs-keyword">var</span> index = <span class="hljs-built_in">window</span>.location.pathname.lastIndexOf(<span class="hljs-string">"/"</span>);
            <span class="hljs-keyword">var</span> currentPath = <span class="hljs-built_in">window</span>.location.pathname.slice(<span class="hljs-number">0</span>, index);
            path = path || currentPath;
            <span class="hljs-keyword">this</span>.addCookie(key, <span class="hljs-keyword">this</span>.getCookie(key), <span class="hljs-number">-1</span>, path);
        }
    });
})(myjQuery, <span class="hljs-built_in">window</span>)
</div></code></pre>
<h2 id="php-%e7%ae%80%e6%98%8e%e4%bd%bf%e7%94%a8">php 简明使用</h2>
<pre><code class="language-php"><div><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// 1.定义变量</span>
$name = <span class="hljs-string">"zhangsan"</span>;
<span class="hljs-keyword">echo</span> $name.<span class="hljs-string">"\n\r\n"</span>;
<span class="hljs-comment">// 2.定义数组</span>
$arr = [<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">5</span>];
print_r($arr);
<span class="hljs-keyword">echo</span> $arr[<span class="hljs-number">1</span>];
<span class="hljs-comment">// 3.定义对象</span>
$dict=<span class="hljs-keyword">array</span>(<span class="hljs-string">"name"</span>=&gt;<span class="hljs-string">"zhangsan"</span>,<span class="hljs-string">"age"</span>=&gt;<span class="hljs-number">123</span>);
print_r($dict);
<span class="hljs-keyword">echo</span> $dict[<span class="hljs-string">"name"</span>];
<span class="hljs-comment">// 4.条件判断</span>
$age=<span class="hljs-number">18</span>;
<span class="hljs-keyword">if</span> ($age&gt;<span class="hljs-number">18</span>) {
    <span class="hljs-keyword">echo</span> <span class="hljs-string">"成年"</span>;
} <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">echo</span> <span class="hljs-string">"未成年"</span>;
}
<span class="hljs-comment">// 5.循环分支</span>
$arr = <span class="hljs-keyword">array</span>(<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">5</span>);
<span class="hljs-keyword">for</span>($i=<span class="hljs-number">0</span>;$i&lt;count($arr);$i++){
    <span class="hljs-keyword">echo</span> $arr[$i];
    <span class="hljs-keyword">echo</span> <span class="hljs-string">"&lt;br&gt;"</span>;
}
<span class="hljs-comment">// 6.获取 get 请求</span>
print_r($_GET);
<span class="hljs-keyword">echo</span>($_GET[<span class="hljs-string">"username"</span>]);
<span class="hljs-keyword">echo</span>($_GET[<span class="hljs-string">"password"</span>]);
<span class="hljs-comment">// 7.获取 post 请求</span>
print_r($_POST);
<span class="hljs-keyword">echo</span>($_POST[<span class="hljs-string">"username"</span>]);
<span class="hljs-keyword">echo</span>($_POST[<span class="hljs-string">"password"</span>]);
<span class="hljs-comment">// 8.获取文件，此时文件会存放到一个临时文件夹里，需要把它移除</span>
print_r($_FILES);
<span class="hljs-keyword">echo</span> <span class="hljs-string">"&lt;br&gt;"</span>;
print_r($_FILES[<span class="hljs-string">"file"</span>]);
$filename=$_FILES[<span class="hljs-string">"file"</span>][<span class="hljs-string">"name"</span>];
$filepath=$_FILES[<span class="hljs-string">"file"</span>][<span class="hljs-string">"tmp_name"</span>];
move_uploaded_file($filepath, <span class="hljs-string">"./source/"</span>.$filename);
<span class="hljs-comment">// 9.延时</span>
sleep(<span class="hljs-number">5000</span>);

<span class="hljs-comment">// 10.ajax</span>
<span class="hljs-keyword">echo</span> <span class="hljs-string">"hello ajax"</span>;
<span class="hljs-keyword">echo</span> $_GET[<span class="hljs-string">"name"</span>];

<span class="hljs-comment">// 11.获取返回 xml</span>
header(<span class="hljs-string">'content-type:text/xml;charset=utf-8'</span>);
<span class="hljs-keyword">echo</span> file_get_contents(<span class="hljs-string">"./xmldata.xml"</span>);

<span class="hljs-comment">// 12.获取返回 json</span>
header(<span class="hljs-string">'content-type:text/html;charset=utf-8'</span>);
<span class="hljs-keyword">echo</span> file_get_contents(<span class="hljs-string">"./jsondata.json"</span>);
<span class="hljs-meta">?&gt;</span>
</div></code></pre>

    </body>
    </html>